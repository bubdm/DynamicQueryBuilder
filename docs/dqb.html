<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-01-26 Tue 11:10 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DynamicQueryBuilder</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Cem YILMAZ &lt;cmylmzbm@outlook.com&gt;" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="rtdocstheme/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="rtdocstheme/readtheorg_theme/css/readtheorg.css"/>
<script type="text/javascript" src="rtdocstheme/lib/js/jquery.min.js"></script>
<script type="text/javascript" src="rtdocstheme/lib/js/bootstrap.min.js"></script>
<script type="text/javascript" src="rtdocstheme/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="rtdocstheme/readtheorg_theme/js/readtheorg.js"></script>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">DynamicQueryBuilder</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org241a0c5">1. What?</a></li>
<li><a href="#orgcb3bce0">2. Why?</a></li>
<li><a href="#orga5c71eb">3. Installation</a></li>
<li><a href="#org6b8bf68">4. DynamicQueryOptions</a>
<ul>
<li><a href="#org566d845">4.1. Basic usage of DQB like below:</a></li>
</ul>
</li>
<li><a href="#org1ba0514">5. Filters</a>
<ul>
<li>
<ul>
<li><a href="#org3086f50">5.0.1. Filter Value Conversion</a></li>
<li><a href="#orga78f894">5.0.2. Supported Filters</a></li>
<li><a href="#org374482d">5.0.3. Supported Logical Operators</a></li>
<li><a href="#orgb592560">5.0.4. Filter Examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org90ad051">6. Sorting</a>
<ul>
<li>
<ul>
<li><a href="#org1e5e223">6.0.1. Sorting Examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgfc1e829">7. Accessing Nested Objects</a></li>
<li><a href="#org668303c">8. Pagination</a>
<ul>
<li><a href="#org91a70ac">8.1. Pagination Examples:</a>
<ul>
<li><a href="#orga89ae04">8.1.1. How to access the filtered count of the query</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org36b2465">9. Web Development with DQB</a>
<ul>
<li><a href="#orgf40616f">9.1. Setting up DynamicQueryBuilderSettings</a></li>
<li><a href="#orge483dd2">9.2. Query Delivery Methods</a></li>
<li><a href="#org727586b">9.3. HTTP Parameters</a>
<ul>
<li><a href="#org6717bfc">9.3.1. <code>o</code> Parameter</a></li>
<li><a href="#org4beb4ff">9.3.2. <code>p</code> Parameter</a></li>
<li><a href="#org4ec9cb1">9.3.3. <code>v</code> Parameter</a></li>
<li><a href="#orgc444fb5">9.3.4. <code>s</code> Parameter</a></li>
<li><a href="#org8cb4caf">9.3.5. <code>offset</code> Parameter</a></li>
<li><a href="#org56ee646">9.3.6. <code>count</code> Parameter</a></li>
</ul>
</li>
<li><a href="#orgc6637a1">9.4. HTTP Query Examples</a></li>
<li><a href="#orge5e376a">9.5. Operation Shortcodes</a>
<ul>
<li><a href="#org1fb100e">9.5.1. Custom Operation Shortcodes</a></li>
</ul>
</li>
<li><a href="#orge784700">9.6. Web Action Examples</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org241a0c5" class="outline-2">
<h2 id="org241a0c5"><span class="section-number-2">1</span> What?</h2>
<div class="outline-text-2" id="text-1">
<p>
DynamicQueryBuilder(DQB) is a lightweight LINQ builder library that works dynamically with the given
collection generic type.
</p>
</div>
</div>

<div id="outline-container-orgcb3bce0" class="outline-2">
<h2 id="orgcb3bce0"><span class="section-number-2">2</span> Why?</h2>
<div class="outline-text-2" id="text-2">
<p>
The motivation behind DQB was to reverse the
development cost of operations such as Filtering, Sorting, Paginating data from
backend to clients. This allows client development to be more free and less
time consuming for non-fullstack development workspaces.
</p>
</div>
</div>

<div id="outline-container-orga5c71eb" class="outline-2">
<h2 id="orga5c71eb"><span class="section-number-2">3</span> Installation</h2>
<div class="outline-text-2" id="text-3">
<p>
You can get DQB from NuGet services with the command below or NuGet UI in visual
studio.
</p>

<p>
DQB currently runs with .netstandard2.1
</p>
<pre class="example">
Install-Package DynamicQueryBuilder
</pre>
</div>
</div>

<div id="outline-container-org6b8bf68" class="outline-2">
<h2 id="org6b8bf68"><span class="section-number-2">4</span> DynamicQueryOptions</h2>
<div class="outline-text-2" id="text-4">
<p>
This is the class that holds everything from filters to sorts and pagination 
options. DQB's has a function called <b><code>ApplyFilters</code></b> which converts
this <b><code>DynamicQueryOptions</code></b> class into a LINQ expression. You can check out
this object <a href="https://github.com/oplog/DynamicQueryBuilder/blob/master/DynamicQueryBuilder/Models/DynamicQueryOptions.cs">here</a>.
</p>
</div>

<div id="outline-container-org566d845" class="outline-3">
<h3 id="org566d845"><span class="section-number-3">4.1</span> Basic usage of DQB like below:</h3>
<div class="outline-text-3" id="text-4-1">
<div class="org-src-container">
<pre class="src src-csharp">IQueryable&lt;MyObject&gt; myCollection = GetMyCollectionOfData();
var myOpts = new DynamicQueryOptions
{
    /*
      Filters,
      SortingOptions,
      Pagination
    */
};

IQueryable&lt;MyObject&gt; dqbResults = myCollection.ApplyFilters(myOpts);
return dqbResults.ToList();
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org1ba0514" class="outline-2">
<h2 id="org1ba0514"><span class="section-number-2">5</span> Filters</h2>
<div class="outline-text-2" id="text-5">
<p>
Filters are the objects that hold your logical filters. You can see the object structure <a href="https://github.com/oplog/DynamicQueryBuilder/blob/master/DynamicQueryBuilder/Models/Filter.cs">here</a>.
</p>
</div>

<div id="outline-container-org3086f50" class="outline-4">
<h4 id="org3086f50"><span class="section-number-4">5.0.1</span> Filter Value Conversion</h4>
<div class="outline-text-4" id="text-5-0-1">
<p>
Since DQB always boxes your data into an <code>object</code> the actual type conversion is
being handled by DQB while transforming your filters into a LINQ expression. DQB
also can handle <code>null</code> values as well.
</p>
</div>
</div>

<div id="outline-container-orga78f894" class="outline-4">
<h4 id="orga78f894"><span class="section-number-4">5.0.2</span> Supported Filters</h4>
<div class="outline-text-4" id="text-5-0-2">
<div class="org-src-container">
<pre class="src src-csharp">In,
Equals,
LessThan,
Contains,
NotEqual,
EndsWith,
StartsWith,
GreaterThan,
LessThanOrEqual,
GreaterThanOrEqual,
Any,
All
</pre>
</div>
</div>
</div>
<div id="outline-container-org374482d" class="outline-4">
<h4 id="org374482d"><span class="section-number-4">5.0.3</span> Supported Logical Operators</h4>
<div class="outline-text-4" id="text-5-0-3">
<p>
All logical operators are supported from Conditional to Bitwise. If you do not
define a logical operator to a <code>Filter</code>, DQB will choose <code>AndAlso</code> as default
Logical Operator.
</p>
</div>
</div>

<div id="outline-container-orgb592560" class="outline-4">
<h4 id="orgb592560"><span class="section-number-4">5.0.4</span> Filter Examples</h4>
<div class="outline-text-4" id="text-5-0-4">
<p>
An example usage of <code>Filter</code> class with a flat object:
</p>

<div class="org-src-container">
<pre class="src src-csharp">var dqbOpts = new DynamicQueryOptions
{
    Filters = new List&lt;Filter&gt;()
    {
        new Filter
        {
            Value = "bar",
            PropertyName = "foo",
            Operator = FilterOperation.Equals
        }
    }
};

// LINQ Translation: myCollection.Where(x =&gt; x.foo == "bar");
</pre>
</div>

<p>
An example usage of <code>Filter</code> class with a collection property:
</p>

<div class="org-src-container">
<pre class="src src-csharp">var dqbOpts = new DynamicQueryOptions
{
    Filters = new List&lt;Filter&gt;
    {
        new Filter
        {
            Value = new DynamicQueryOptions
            {
                Value = "some_value",
                Operator = FilterOperation.Equals,
                PropertyName = "bar"
            },
            Operator = FilterOperation.Any,
            PropertyName = "foo"
        }
    }
};

// LINQ Translation: myCollection.Where(x =&gt; x.foo.Any(y =&gt; y.bar == "some_value"));
</pre>
</div>


<p>
An example usage of <code>Filter</code> class with a logical operator, combining two filters:
</p>

<div class="org-src-container">
<pre class="src src-csharp">var dqbOpts = new DynamicQueryOptions
{
    Filters = new List&lt;Filter&gt;
    {
        new Filter
        {
            Value = "123",
            PropertyName = "Fizz",
            Operator = FilterOperation.Equals,
            LogicalOperator = LogicalOperator.OrElse,
        },
        new Filter
        {
            Value = "321",
            PropertyName = "Fizz",
            Operator = FilterOperation.Equals,
        }
    }
};

// LINQ Translation: myCollection.Where(x =&gt; x.Fizz == "123" || x.Fizz == "321");
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org90ad051" class="outline-2">
<h2 id="org90ad051"><span class="section-number-2">6</span> Sorting</h2>
<div class="outline-text-2" id="text-6">
<p>
Sorting is extremely easy with DQB. DQB currently does not support for custom
sorting callbacks and uses default .NET's <code>OrderBy</code>, <code>OrderByDescending</code>,
<code>ThenBy</code> and <code>ThenByDescending</code> functions. Sorting should be provided via
<code>SortOption</code> class which you can check out <a href="https://github.com/oplog/DynamicQueryBuilder/blob/master/DynamicQueryBuilder/Models/SortOption.cs">here</a>.
</p>
</div>

<div id="outline-container-org1e5e223" class="outline-4">
<h4 id="org1e5e223"><span class="section-number-4">6.0.1</span> Sorting Examples</h4>
<div class="outline-text-4" id="text-6-0-1">
<div class="org-src-container">
<pre class="src src-csharp">var dqbOpts = new DynamicQueryOptions
{
    SortOptions = new List&lt;SortOption&gt;()
    {
        new SortOption
        {
            SortingDirection = SortingDirection.Asc,
            PropertyName = "Foo"
        };

        new SortOption
        {
            SortingDirection = SortingDirection.Desc,
            PropertyName = "Bar"
        };
    }
};

// LINQ Translation: myCollection.OrderBy(x =&gt; x.Foo).ThenByDescending(x =&gt; x.Bar);
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgfc1e829" class="outline-2">
<h2 id="orgfc1e829"><span class="section-number-2">7</span> Accessing Nested Objects</h2>
<div class="outline-text-2" id="text-7">
<p>
DQB can access nested object with <code>.</code> delimeter like C# LINQ.
</p>
<div class="org-src-container">
<pre class="src src-csharp">public class MyNestedClass
{
    public int Age { get; set; }
}

public class MyClassToFilter
{
    public MyNestedClass MyNestedProperty { get; set; }
}
</pre>
</div>

<p>
With the object structures above, we could utilize <code>Filter</code> and <code>Sort</code>
operations like below:
</p>

<ul class="org-ul">
<li><p>
<b>Filter</b>
</p>
<div class="org-src-container">
<pre class="src src-csharp">new Filter
{
    Value = "27",
    Operator = FilterOperation.Equals,
    PropertyName = "MyNestedProperty.Age"
};

// LINQ Translation: myCollection.Where(x =&gt; x.MyNestedProperty.Age == 28);
</pre>
</div></li>

<li><p>
<b>Sort</b>
</p>
<div class="org-src-container">
<pre class="src src-csharp">new SortOption
{
    SortingDirection = SortingDirection.Asc,
    PropertyName = "MyNestedProperty.Age"
}

// LINQ Translation: myCollection.OrderBy(x =&gt; x.MyNestedProperty.Age);
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org668303c" class="outline-2">
<h2 id="org668303c"><span class="section-number-2">8</span> Pagination</h2>
<div class="outline-text-2" id="text-8">
<p>
Pagination can be done by specifiynig options into the <code>PaginationOptions</code>
member of <code>DynamicQueryOptions</code> class. You can check it out <a href="https://github.com/oplog/DynamicQueryBuilder/blob/master/DynamicQueryBuilder/Models/PaginationOption.cs">here</a>.
Pagination utilizes LINQ's <code>Skip</code> and <code>Take</code> functions.
</p>
</div>

<div id="outline-container-org91a70ac" class="outline-3">
<h3 id="org91a70ac"><span class="section-number-3">8.1</span> Pagination Examples:</h3>
<div class="outline-text-3" id="text-8-1">
<div class="org-src-container">
<pre class="src src-csharp">var paginationOption = new PaginationOption
{
    Count = 10,
    Offset = 0,
    AssignDataSetCount = true
};

// LINQ Translation: myCollection.Skip(0).Take(10);
</pre>
</div>
</div>

<div id="outline-container-orga89ae04" class="outline-4">
<h4 id="orga89ae04"><span class="section-number-4">8.1.1</span> How to access the filtered count of the query</h4>
<div class="outline-text-4" id="text-8-1-1">
<p>
if its required to access the total query result amount(whole set) you can access it via
</p>

<div class="org-src-container">
<pre class="src src-csharp">int totalDataSetCount = paginationOption.DataSetCount;
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org36b2465" class="outline-2">
<h2 id="org36b2465"><span class="section-number-2">9</span> Web Development with DQB</h2>
<div class="outline-text-2" id="text-9">
<p>
Web development is actually where DQB shines the most. DQB comes with an
<code>ActionFilter</code> that can parse HTTP queries into <code>DynamicQueryOptions</code> class.
</p>
</div>

<div id="outline-container-orgf40616f" class="outline-3">
<h3 id="orgf40616f"><span class="section-number-3">9.1</span> Setting up DynamicQueryBuilderSettings</h3>
<div class="outline-text-3" id="text-9-1">
<p>
This is a singleton object that can hold static configurations for DQB like
operation shortcodes, query resolution methods and data source case sensitivity.
You can check out this object <a href="https://github.com/oplog/DynamicQueryBuilder/blob/master/DynamicQueryBuilder/Models/DynamicQueryBuilderSettings.cs">here</a>.
</p>

<p>
It is usually best to create an instance of this class in your Web Projects
<code>Startup.cs</code> and inject it as a singleton like below
</p>

<div class="org-src-container">
<pre class="src src-csharp">public class Startup
{
    public Startup(ILogger&lt;Startup&gt; logger, IConfiguration configuration)
    {
        this.Logger = logger;
        this.Configuration = configuration;
    }

    public ILogger&lt;Startup&gt; Logger { get; }

    public IConfiguration Configuration { get; }

    // This method gets called by the runtime. Use this method to add services to the container.
    public void ConfigureServices(IServiceCollection services)
    {
        // .. other stuff

        var dqbSettings = new DynamicQueryBuilderSettings
        {
            // .. your settings(explained below)
        };

        services.AddSingleton(dqbSettings);

        // .. other stuff
    }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orge483dd2" class="outline-3">
<h3 id="orge483dd2"><span class="section-number-3">9.2</span> Query Delivery Methods</h3>
<div class="outline-text-3" id="text-9-2">
<p>
DQB can retrieve your encoded/non-encoded queries via options like below:
</p>

<ul class="org-ul">
<li><b>Request QueryString</b></li>
</ul>

<p>
Below, there is an example of configuring DQB to retrieve queries from query string
</p>

<div class="org-src-container">
<pre class="src src-csharp">string parameterToResolveFrom = "myparamtoresolve";
Func&lt;string, string&gt; decodeFunction = (encodedQuery) =&gt; magicDecode(encodedQuery);

new DynamicQueryBuilderSettings
{
    // Other configurations
    QueryOptionsResolver = new QueryStringResolver(parameterToResolveFrom, decodeFunction)
}
</pre>
</div>

<p>
<b>Tip</b>: you can leave <code>parameterToResolveFrom</code> null to resolve your queries
directly from the raw querystring.
</p>

<ul class="org-ul">
<li><p>
<b>Request HTTP Header</b>
</p>

<p>
Below, there is an example of configuring DQB to retrieve queries from HTTP Headers
</p></li>
</ul>

<div class="org-src-container">
<pre class="src src-csharp">string httpHeaderName = "myhttpheadername";
Func&lt;string, string&gt; decodeFunction = (encodedQuery) =&gt; magicDecode(encodedQuery);

new DynamicQueryBuilderSettings
{
    // Other configurations
    QueryOptionsResolver = new HttpHeaderResolver(httpHeaderName, decodeFunction)
}
</pre>
</div>

<p>
<b>Tip</b>: you can always leave <code>decodeFunction</code> null if your queries are not encoded.
</p>
</div>
</div>

<div id="outline-container-org727586b" class="outline-3">
<h3 id="org727586b"><span class="section-number-3">9.3</span> HTTP Parameters</h3>
<div class="outline-text-3" id="text-9-3">
</div>
<div id="outline-container-org6717bfc" class="outline-4">
<h4 id="org6717bfc"><span class="section-number-4">9.3.1</span> <code>o</code> Parameter</h4>
<div class="outline-text-4" id="text-9-3-1">
<ul class="org-ul">
<li>Refers to <code>FilterOperation</code> and <code>LogicalOperator</code> properties of <code>Filter</code>
class.</li>
<li>Parameter formation should be <code>FilterOperation|LogicalOperator</code> using <code>|</code> as
a delimeter between properties.</li>
<li>This parameter can be placed anywhere in the querystring.</li>
<li>This parameter <b><b>should be forming a triplet with <code>p</code> and <code>v</code> parameters.</b></b></li>
</ul>
</div>
</div>

<div id="outline-container-org4beb4ff" class="outline-4">
<h4 id="org4beb4ff"><span class="section-number-4">9.3.2</span> <code>p</code> Parameter</h4>
<div class="outline-text-4" id="text-9-3-2">
<ul class="org-ul">
<li>Refers to the <code>PropertyName</code> property of <code>Filter</code> class.</li>
<li>This parameter <b><b>should be placed after the <code>o</code> parameter.</b></b>.</li>
<li>This parameter <b><b>should be forming a triplet with <code>o</code> and <code>v</code> parameters.</b></b></li>
</ul>
</div>
</div>

<div id="outline-container-org4ec9cb1" class="outline-4">
<h4 id="org4ec9cb1"><span class="section-number-4">9.3.3</span> <code>v</code> Parameter</h4>
<div class="outline-text-4" id="text-9-3-3">
<ul class="org-ul">
<li>Refers to the <code>PropertyValue</code> property of <code>Filter</code> class.</li>
<li>This parameter <b><b>should be placed after the <code>p</code> parameter.</b></b>.</li>
<li>This parameter <b><b>should be forming a triplet with <code>o</code> and <code>p</code> parameters.</b></b></li>
</ul>
</div>
</div>

<div id="outline-container-orgc444fb5" class="outline-4">
<h4 id="orgc444fb5"><span class="section-number-4">9.3.4</span> <code>s</code> Parameter</h4>
<div class="outline-text-4" id="text-9-3-4">
<ul class="org-ul">
<li>Refers to the <code>SortOption</code> class.</li>
<li>This parameter can be placed anywhere in the querystring.</li>
<li><b><b>If this parameter occurs more than once, sorting will be done in the given order.</b></b></li>
</ul>
</div>
</div>

<div id="outline-container-org8cb4caf" class="outline-4">
<h4 id="org8cb4caf"><span class="section-number-4">9.3.5</span> <code>offset</code> Parameter</h4>
<div class="outline-text-4" id="text-9-3-5">
<ul class="org-ul">
<li>Refers to the <code>Offset</code> property of <code>PaginationOption</code> class.</li>
<li>This parameter can be placed anywhere in the querystring.</li>
<li><b><b>If this parameter occurs more than once, the first occurence will be assigned.</b></b></li>
</ul>
</div>
</div>

<div id="outline-container-org56ee646" class="outline-4">
<h4 id="org56ee646"><span class="section-number-4">9.3.6</span> <code>count</code> Parameter</h4>
<div class="outline-text-4" id="text-9-3-6">
<ul class="org-ul">
<li>Refers to the <code>Count</code> property of <code>PaginationOption</code> class.</li>
<li>This parameter can be placed anywhere in the querystring.</li>
<li><b><b>If this parameter occurs more than once, the first occurence will be assigned.</b></b></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgc6637a1" class="outline-3">
<h3 id="orgc6637a1"><span class="section-number-3">9.4</span> HTTP Query Examples</h3>
<div class="outline-text-3" id="text-9-4">
<ul class="org-ul">
<li>Valid Example: <b>?o=Equals&amp;p=foo&amp;v=bar</b></li>
</ul>

<p>
will be transformed into:
</p>

<div class="org-src-container">
<pre class="src src-csharp">var filter = new Filter
{
    Operator = FilterOperation.Equals,
    PropertyName = "foo",
    Value = "bar"
};

// LINQ Translation: myCollection.Where(x =&gt; x.foo == "bar");
</pre>
</div>

<p>
or to apply multiple filters
</p>

<ul class="org-ul">
<li>Valid Example: <b>?o=Equals&amp;p=foo&amp;v=bar&amp;o=Equals&amp;p=fizz&amp;v=buzz</b>
Since this query does not provide a logical operator, parser will choose
<code>AndAlso</code> which is the default logical operator.</li>
</ul>

<p>
will be transformed into:
</p>

<div class="org-src-container">
<pre class="src src-csharp">var filterOne = new Filter
{
    Operator = FilterOperation.Equals,
    PropertyName = "foo",
    Value = "bar"
};

var filterTwo = new Filter
{
    Operator = FilterOperation.Equals,
    PropertyName = "fizz",
    Value = "buzz"
};

// LINQ Translation: myCollection.Where(x =&gt; x.foo == "bar" &amp;&amp; x.fizz == "buzz");
</pre>
</div>

<ul class="org-ul">
<li>Valid Example: <b>?o=Equals|OrElse&amp;p=foo&amp;v=bar&amp;o=Equals&amp;p=fizz&amp;v=buzz</b></li>
</ul>

<p>
will be transformed into:
</p>

<div class="org-src-container">
<pre class="src src-csharp">var filterOne = new Filter
{
    LogicalOperator = LogicalOperation.OrElse,
    Operator = FilterOperation.Equals,
    PropertyName = "foo",
    Value = "bar"
};

var filterTwo = new Filter
{
    Operator = FilterOperation.Equals,
    PropertyName = "fizz",
    Value = "buzz"
};

// LINQ Translation: myCollection.Where(x =&gt; x.foo == "bar" || x.fizz == "buzz");
</pre>
</div>

<ul class="org-ul">
<li>Valid Example with ascending sort and pagination: <b>?o=Equals&amp;p=foo&amp;v=bar&amp;s=foo,asc&amp;offset=0&amp;count=10</b></li>
</ul>
<p>
<b>DynamicQueryOptions</b> Transform:
</p>

<div class="org-src-container">
<pre class="src src-csharp">var filter = new Filter
{
    Operator = FilterOperation.Equals,
    PropertyName = "foo",
    Value = "bar"
};

var sort = new SortOption
{
    PropertyName = "foo",
    SortingDirection = SortingDirection.Asc
};

var pagination = new PaginationOption
{
    Offset = 0,
    Count = 10
};

/* LINQ Translation:

myCollection.Where(x =&gt; x.foo == "bar")
            .OrderBy(ord =&gt; ord.foo)
            .Skip(0)
            .Take(10);

*/
</pre>
</div>

<ul class="org-ul">
<li>Valid Example of Collection Member Querying <b>?o=any&amp;p=foo&amp;v=(o=Equals&amp;p=fizz&amp;v=buzz)</b></li>
</ul>
<p>
will be transformed into:
</p>

<div class="org-src-container">
<pre class="src src-csharp">var filter = new Filter
{
    Operator = FilterOperation.Any,
    PropertyName = "foo",
    Value = new DynamicQueryOptions
    {
        Operator = FilterOperation.Equals,
        PropertyName = "fizz",
        Value = "buzz"
    }
};

// LINQ Translation: myCollection.Where(x =&gt; x.foo.Any(y =&gt; y.fizz == "buzz"));
</pre>
</div>

<ul class="org-ul">
<li>Valid Example with pagination: <b>?offset=0&amp;count=10</b></li>

<li>Valid Example with descending sort: <b>?o=Equals&amp;p=foo&amp;v=bar&amp;s=foo,desc</b></li>

<li>Valid Descending Sort Example without any filters: <b>?s=foo,desc</b></li>
</ul>

<p>
<b>Tip</b>: if you do not provide any sorting direction, DynamicQueryBuilder will sort the data in <b>ascending</b> order.
</p>

<ul class="org-ul">
<li>Valid Example with ascending sort without stating the direction: <b>?o=Equals&amp;p=foo&amp;v=bar&amp;s=foo</b></li>
</ul>
</div>
</div>

<div id="outline-container-orge5e376a" class="outline-3">
<h3 id="orge5e376a"><span class="section-number-3">9.5</span> Operation Shortcodes</h3>
<div class="outline-text-3" id="text-9-5">
<p>
DQB has default operation short codes for shorter HTTP queries which are below;
</p>

<div class="org-src-container">
<pre class="src src-csharp">{ "eq", FilterOperation.Equals },
{ "lt", FilterOperation.LessThan },
{ "cts", FilterOperation.Contains },
{ "ne", FilterOperation.NotEqual },
{ "ew", FilterOperation.EndsWith },
{ "sw", FilterOperation.StartsWith },
{ "gt", FilterOperation.GreaterThan },
{ "ltoe", FilterOperation.LessThanOrEqual },
{ "gtoe", FilterOperation.GreaterThanOrEqual }
{ "any", FilterOperation.Any }
{ "all", FilterOperation.All }
</pre>
</div>
</div>

<div id="outline-container-org1fb100e" class="outline-4">
<h4 id="org1fb100e"><span class="section-number-4">9.5.1</span> Custom Operation Shortcodes</h4>
<div class="outline-text-4" id="text-9-5-1">
<p>
You can change any operation shortcode to whatever you want in
<code>DynamicQueryBuilderSettings</code> object's <code>CustomOpCodes</code> member like below.
</p>

<div class="org-src-container">
<pre class="src src-csharp">var mySettings = new DynamicQueryBuilderSettings
{
    CustomOpCodes = new CustomOpCodes
    {
        { "my_eq", FilterOperation.Equals },
        { "my_lt", FilterOperation.LessThan },
        { "my_cts", FilterOperation.Contains },
        { "my_ne", FilterOperation.NotEqual },
        { "my_ew", FilterOperation.EndsWith },
        { "my_sw", FilterOperation.StartsWith },
        { "my_gt", FilterOperation.GreaterThan },
        { "my_ltoe", FilterOperation.LessThanOrEqual },
        { "my_gtoe", FilterOperation.GreaterThanOrEqual },
        { "my_any", FilterOperation.Any },
        { "my_all", FilterOperation.All },
    }
};
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge784700" class="outline-3">
<h3 id="orge784700"><span class="section-number-3">9.6</span> Web Action Examples</h3>
<div class="outline-text-3" id="text-9-6">
<p>
<b>DynamicQueryAttribute</b> is the handler for parsing the querystring into <b>DynamicQueryOptions</b> class and has 3 optional parameters.
</p>

<div class="org-src-container">
<pre class="src src-csharp">DynamicQueryAttribute(
    // Declares the max page result count for the endpoint.
int maxCountSize = 100,
    // Declares the switch for inclusion of total data set count to *PaginationOptions* class.
bool includeDataSetCountToPagination = true,
    // Declares the behaviour when the requested page size exceeds the assigned maximum count.
PaginationBehaviour exceededPaginationCountBehaviour = PaginationBehaviour.GetMax,
    // Resolves the dynamic query string from the given query parameter value.
string resolveFromParameter = "")
</pre>
</div>

<ul class="org-ul">
<li><p>
The ResolveFromParameter
</p>

<p>
This argument exists because some API's would want to send their queries
inside of a HTTP parameter like below:
</p></li>
</ul>

<div class="org-src-container">
<pre class="src src-HTTP">https://foobar.com/results?dqb=%3Fo%3Deq%26p%3Dfoo%26v%3Dbar
</pre>
</div>

<p>
So, you can set this parameter specifically for an endpoint with the
<code>DynamicQueryAttribute</code> or you can set it in <code>DynamicQueryBuilderSettings</code>
globally with QueryResolvers. Check out <a href="#orge483dd2">Query Delivery Methods</a>.
</p>

<ul class="org-ul">
<li>PaginationBehaviour enum</li>
</ul>

<div class="org-src-container">
<pre class="src src-csharp">public enum PaginationBehaviour
{
    // DynamicQueryBuilder will return maxCountSize of results if the *Count* property exceeds *maxCountSize*.
    GetMax,
    // DynamicQueryBuilder will throw MaximumResultSetExceededException if the *Count* property exceeds *maxCountSize*.
    Throw
}
</pre>
</div>

<ul class="org-ul">
<li>Example with no pagination specified(default pagination options will be applied).</li>
</ul>

<div class="org-src-container">
<pre class="src src-csharp">[DynamicQuery]
[HttpGet("getMyDataSet")]
public IActionResult Get(DynamicQueryOptions filter)
{
    IEnumerable&lt;MyObject&gt; myDataSet = _myRepository.GetMyObjectList();
    return Ok(myDataSet.ApplyFilters(filter));
}
</pre>
</div>

<ul class="org-ul">
<li>Example with default pagination options for the endpoint specified.</li>
</ul>

<div class="org-src-container">
<pre class="src src-csharp">[HttpGet("getMyDataSet")]
[DynamicQuery(maxCountSize: 101, includeDataSetCountToPagination: true, exceededPaginationCountBehaviour: PaginationBehaviour.GetMax)]
public IActionResult Get(DynamicQueryOptions filter)
{
    IEnumerable&lt;MyObject&gt; myDataSet = _myRepository.GetMyObjectList();
    return Ok(myDataSet.ApplyFilters(filter));
}
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Cem YILMAZ &lt;cmylmzbm@outlook.com&gt;</p>
<p class="date">Created: 2021-01-26 Tue 11:10</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
